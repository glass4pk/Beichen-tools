<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <title>未来大学</title>
    <!--CSS-->
    <!-- <link rel="stylesheet" type="text/css" href="static/css/common.css"> -->
    <style type="text/css">
        body {
            background-color:#000000;
            margin: 0px;
        }
        #main{
            position: relative;
        }
        .scale img{
            margin: 0;
            padding: 0;
            background-size: contain|cover;
            width: 100%;
            height:auto;
        }
    </style>
    <!--JS-->
    <script>
        function getResult(resultId, callback) {
            alert('result_id: ' + resultId)
            var xhr = new XMLHttpRequest();
            xhr.open('GET', '/gp/getresult?result_id=' + resultId, true);
            xhr.onload = function (e) {
                if (e.target.status === 200) {
                    var resultList = JSON.parse(e.target.responseText);
                    console.log(resultList);
                    for (var i = resultList.data.length; i > 0; i--) {
                        callback(resultList.data[i - 1]['url']);
                    }
                }
            }
            xhr.send(null);
        }
    
        function start() {
            var url = location.href;
            var b = url.split('?result_id=')
            alert(b);
            if (b.length > 1) {
                alert(b[1]);
                var result_id = b[1].split('&')[0];
                alert(result_id);
                getResult(result_id, function (e) {
                    document.getElementById('main').innerHTML = "<div id='main'><div class='scale'><img class='backgroundpic' src='"+ e +"'></div></div>";
                })
            }
        }

        window.onload = start();
    </script>
    <!-- <script type="text/javascript" src="static/js/jquery-3.3.1.min.js"></script> -->
</head>
<body>
    <div id='main'>
    </div>
</body>
</html>
